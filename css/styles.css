:root {
  --bg: #fff8ff;
  --ink: #2b2b2b;
  --accent: #ff6b8b;
  --accent-dark: #d94e70;
  --balloonA: #ff9ec1;
  --balloonB: #f7b267;
  --balloonC: #c7a6ff;
  --balloonD: #7fd1ae;
}

* {
  box-sizing: border-box;
}

html, body {
  height: 100%;
  margin: 0;
  font-family: system-ui, -apple-system, 'Noto Sans TC', sans-serif;
  color: var(--ink);
}

@font-face {
  font-family: 'ChenYuluoyanMS';
  src: url('../assets/fonts/ChenYuluoyan-Thin-Monospaced.ttf') format('truetype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

/* 主螢幕布局 */
body.screen {
  background: linear-gradient(#fdf2ff, #f4f7ff);
}

#stage {
  position: relative;
  height: 100vh;
  overflow: hidden;
}

.hint {
  position: absolute;
  left: 20px;
  top: 12px;
  opacity: 0.75;
  z-index: 3;
  display: none;
}

.panel {
  position: absolute;
  right: 20px;
  bottom: 20px;
  background: #fff8;
  backdrop-filter: blur(6px);
  padding: 12px 14px;
  border-radius: 16px;
  box-shadow: 0 10px 30px #0002;
  z-index: 3;
}

#qrcode {
  width: 140px;
  height: 140px;
  margin-top: 6px;
}

/* 放到左下角 */
#qrBox.panel {
  right: auto;
  left: 20px;
  bottom: 20px; /* 保留原本的下邊距 */
  text-align: center;   /* 讓文字、QR 都置中 */
}

#qrBox h3,
#qrBox p {
  margin: 0 0 8px;
}

#qrBox #qrcode {
  margin: 10px auto 0;   /* 上 10px 間距，自動左右置中 */
  display: block;        /* 確保是區塊元素 */
}

/* 背景圖層 */
#stage .bg {
  position: absolute;
  inset: 0;
  background: url('https://lass120625.github.io/School/assets/background1.png') center/cover no-repeat;
  z-index: 0;
}

/* 紅帶 */
/* 紅帶容器 */
#ribbon {
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  height: 50px;
  pointer-events: none;
  z-index: 2;
}

:root {
  --accent: #ff3130;      /* 蝴蝶結亮紅 */
  --accent-dark: #f40612; /* 帶子陰影 */
}

/* 左右帶子（本體保留完整矩形，50% 寬） */
.ribbon-left, .ribbon-right {
  position: absolute;
  top: 0;
  width: 50%;
  height: 100%;
  background: linear-gradient(90deg, var(--accent) 0%, var(--accent-dark) 100%);
  z-index: 1;
  box-shadow: inset 0 4px 8px rgba(0,0,0,0.3),
              inset 0 -4px 6px rgba(255,255,255,0.4);
  overflow: hidden; /* 波浪放在 ::before */
}

.ribbon-left {
  left: 0;
  border-top-right-radius: 30px;
  border-bottom-right-radius: 30px;
}
.ribbon-right {
  right: 0;
  transform: scaleX(-1);
  border-top-right-radius: 30px;
  border-bottom-right-radius: 30px;
}



/* 蝴蝶結 */
.ribbon-knot {
  position: absolute;
  left: 50%;
  top: 170%; /* 下移一點 */
  transform: translate(-50%, -50%);
  width: 400px;
  height: auto;
  z-index: 3;
}
.ribbon-knot img {
  width: 100%;
  height: auto;
  display: block;
  filter: drop-shadow(0 6px 8px rgba(0,0,0,0.25));
  animation: bowBreath 3.5s ease-in-out infinite;
}

/* 呼吸效果 */
@keyframes bowBreath {
  0%, 100% { transform: scale(1); }
  50%      { transform: scale(1.08); }
}

/* 剪綵動畫 */
.cut .ribbon-left {
  animation: slideL 1.6s ease forwards;
}
.cut .ribbon-right {
  animation: slideR 1.6s ease forwards;
}
.cut .ribbon-knot {
  animation: pop 0.8s ease forwards 0.4s;
}
/* 剪綵時：停止呼吸，原位放大淡出 */
.cut .ribbon-knot img {
  animation: bowFadeOut 1.2s ease forwards !important; /* 蓋掉 bowBreath */
  transform-origin: center center; /* 以中心點放大，不會漂移 */
}

@keyframes slideL {
  to { transform: translateX(-120%); }
}
@keyframes slideR {
  to { transform: translateX(120%) scaleX(-1); }
}

/* 淡出關鍵幀：只縮放+透明，不帶 translate */
@keyframes bowFadeOut {
  0%   { opacity: 1;   transform: scale(1);   }
  60%  { opacity: 0.7; transform: scale(1.3); }
  100% { opacity: 0;   transform: scale(1.6); }
}




/* 名字貼紙層 */
#balloon-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 1;
}

.sticker {
  position: absolute;
  min-width: 110px;
  padding: 10px 14px;
  border-radius: 14px;
  font-weight: 700;
  text-align: center;
  color: #1b1b1b;
  background: #fff8;
  backdrop-filter: blur(4px);
  box-shadow: 0 10px 24px #0002;
  transform: rotate(var(--rot, 0deg)) scale(1);
  font-family: 'ChenYuluoyanMS', 'Noto Sans TC', system-ui, -apple-system, sans-serif;
  letter-spacing: 0.02em;
}

.sticker[data-c="0"] {
  background: var(--balloonA);
}

.sticker[data-c="1"] {
  background: var(--balloonB);
}

.sticker[data-c="2"] {
  background: var(--balloonC);
}

.sticker[data-c="3"] {
  background: var(--balloonD);
}


/* 氣球樣式（顯示圖片＋中間的人名） */
.balloon {
  position: absolute;            /* 讓子元素絕對定位相對於這個容器 */
  width: 120px;                  /* 氣球寬度可依需要調整 */
  text-align: center;
  pointer-events: none;
  filter: drop-shadow(0 12px 24px rgba(0,0,0,0.25));
  animation: balloonFloat var(--floatDur, 6s) ease-in-out infinite;
  z-index: 1;                    /* 在主畫面元素之上；已經比背景高 */
}

.balloon img {
  width: 100%;
  height: auto;
  display: block;
}

/* 人名：放在氣球中間略偏下，確保在圖片之上 */
.balloon-label {
  position: absolute;
  left: 50%;
  top: 50%;                      /* 改用 top 置中 */
  transform: translate(-50%, -50%);  /* 完全居中對齊 */
  font-family: 'ChenYuluoyanMS','Noto Sans TC',system-ui,-apple-system,sans-serif;
  font-weight: 700;
  font-size: 38px;               
  line-height: 1.2;
  color: #01031e;
  z-index: 2;                    /* 在圖片上層 */
  pointer-events: none;

  /* 白色字在亮色氣球上保持可見 */
  -webkit-text-stroke: 3px rgba(0,0,0,0.4);   /* 黑色描邊更粗 */
  text-shadow:
    0 3px 6px rgba(0,0,0,0.5),
    0 0 4px rgba(0,0,0,0.6);
}

/* 輕微漂浮動畫 */
@keyframes balloonFloat {
  0%,100% { transform: translateY(0); }
  50%     { transform: translateY(-10px); }
}



/* Gentle motion pack */
@keyframes bob {
  0%, 100% {
    transform: translateY(0) rotate(var(--rot, 0deg));
  }
  50% {
    transform: translateY(-3px) rotate(var(--rot, 0deg));
  }
}

@keyframes sway {
  0%, 100% {
    transform: rotate(calc(var(--rot, 0deg) - 1deg));
  }
  50% {
    transform: rotate(calc(var(--rot, 0deg) + 1deg));
  }
}

@keyframes breathe {
  0%, 100% {
    transform: scale(1) rotate(var(--rot, 0deg));
  }
  50% {
    transform: scale(1.02) rotate(var(--rot, 0deg));
  }
}

.sticker.motion-bob {
  animation: bob var(--dur1, 3.2s) ease-in-out infinite;
  will-change: transform;
}

.sticker.motion-sway {
  animation: sway var(--dur2, 4.4s) ease-in-out infinite;
  will-change: transform;
}

.sticker.motion-breathe {
  animation: breathe var(--dur3, 5.6s) ease-in-out infinite;
  will-change: transform;
}

.sticker.motion-bob.motion-breathe {
  animation: bob var(--dur1, 3.2s) ease-in-out infinite, breathe var(--dur3, 5.6s) ease-in-out infinite;
}

.sticker.motion-sway.motion-breathe {
  animation: sway var(--dur2, 4.4s) ease-in-out infinite, breathe var(--dur3, 5.6s) ease-in-out infinite;
}

.sticker.motion-bob.motion-sway {
  animation: bob var(--dur1, 3.2s) ease-in-out infinite, sway var(--dur2, 4.4s) ease-in-out infinite;
}

.sticker.motion-bob.motion-sway.motion-breathe {
  animation: bob var(--dur1, 3.2s) ease-in-out infinite, sway var(--dur2, 4.4s) ease-in-out infinite, breathe var(--dur3, 5.6s) ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .sticker[class*="motion-"] {
    animation: none !important;
  }
}

/* 剪綵前「看不到」QR 與名字層（剪綵後才顯示） */
#stage:not(.after-cut) #qrBox {
  display: none;
}

#stage:not(.after-cut) #balloon-layer {
  display: none;
}

/* 來賓頁 */
body.guest {
  background: linear-gradient(#fff, #f3f8ff);
  display: grid;
  place-items: center;
  height: 100vh;
}

.card {
  background: #fff;
  padding: 24px 20px;
  border-radius: 20px;
  box-shadow: 0 20px 60px #0002;
  width: min(92vw, 520px);
}

.card h1 {
  margin: 0 0 8px;
}

#nameForm {
  display: flex;
  gap: 10px;
  margin-top: 12px;
}

#nameInput {
  flex: 1;
  padding: 12px 14px;
  border: 2px solid #ddd;
  border-radius: 12px;
  font-size: 18px;
}

button {
  padding: 12px 16px;
  border-radius: 12px;
  background: var(--accent);
  color: #fff;
  border: none;
  font-size: 16px;
  cursor: pointer;
}

button:hover {
  filter: brightness(0.92);
}

.msg {
  color: #2a6f2a;
  margin-top: 10px;
}
